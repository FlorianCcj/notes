

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Git - Hook &mdash; my_knowledge 0.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Git - Multi Repo management (submodule and fork)" href="git-submodule.html" />
    <link rel="prev" title="Git - For beginner" href="git-for_beginner.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> my_knowledge
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../todo/todo-000_wip.html">Todos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ansible/ansible-if.html">Ansible - if</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ansible/ansible-molecule.html">Ansible - Molecule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../db/db-mysql-tricks.html">DB - MySQL - Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../db/db-neo4j-cypher.html">Db - Neo4j - Cypher</a></li>
<li class="toctree-l1"><a class="reference internal" href="../db/db-neo4j-from_sql_to_neo4j.html">Db - Neo4j - From SQL to NEO4J</a></li>
<li class="toctree-l1"><a class="reference internal" href="../db/db-postgres-user_permissions.html">Db - Postgres - User Permissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../discord/discord-bot-node.html">Discord - Bot - NodeJS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../discord/discord-bot-node-example.html">Discord - Bot - NodeJS - First Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-config.html">Git - gitconfig</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-crash-course.html">Git - Crash Course</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-for_beginner.html">Git - For beginner</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Git - Hook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#def">Def</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-local">Install local</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#make-post-commit-hook-thanks-to-template">Make post-commit hook thanks to template</a></li>
<li class="toctree-l3"><a class="reference internal" href="#make-post-commit-hook-thanks-to-global-directory">Make post-commit hook thanks to global directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#make-local-project-hook">Make local project hook</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#install-server">Install Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hook-list">Hook list</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example">Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#post-commit-example">Post-commit example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pre-commit-example">Pre-commit example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#todo">Todo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sources">Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="#document-history">Document history</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="git-submodule.html">Git - Multi Repo management (submodule and fork)</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-trics.html">Git - Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/aws-foundations_technical.html">AWS - Foundations Technical</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/cloud_native-security_101.html">Cloud Native - Security 101</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/docker-network.html">Docker - Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/docker-tricks.html">Docker - Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/k8s-deploy-troubleshooting.html">K8S - Deploy - Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/k8s-getting_started.html">k8s - Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/k8s-no_yaml.html">Yaml is optional</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/k8s-observability.html">K8S - Observability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/k8s-security.html">K8S - Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-ansible.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-aws.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-consul.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-docker.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-docker_compose.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-docker_swarm.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-haproxy.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-jenkins.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-jmeter.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-k8s.html">xavki-k8s</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-lxc_lxd.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-mesh.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-netcat.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-terraform.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s/xavki-vagrant.html">Document history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/default_bin.html">Linux - Default bin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/linux-check_port.html">linux - check port</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/linux-debug.html">Linux - debug</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/linux-history.html">Linux - History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/linux-triks.html">Linux - Triks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/linux-tmux.html">Linux - Tmux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/linux-vi.html">Linux - Vim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sup/sup-grafana.html">Sup - Grafana</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sup/sup-monitoring_with_prometheus.html">Sup - Monitoring with Prometheus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sup/sup-promql.html">Sup - promql</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sup/sup-thanos.html">Sup - Thanos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vault/vault-admin.html">Vault - Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vault/vault-install.html">Vault - Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vault/vault-user.html">Vault - User</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/angular-async_await.html">Angular - async await</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/angular-environment.html">Angular - Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/angular-ngclass_and_ngstyle.html">Angular - Ngclass and Ngstyle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/angular-ngrx-pokedex.html">Angular - NgrxPokedex</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/angular-pwa.html">Angular - PWA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/angular-tricks.html">Angular - Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/js-console_log.html">JS - console.log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/js-cypress.html">JS - Cypress</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/js-import.html">JS - Import</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/js-method-need-to-know.html">JS - Method you need to know</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/js-redux.html">JS - Redux Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/js-trick.html">JS - Trick</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/js-webpack_from_zero_to_hero.html">JS - Webpack from Zero to Hero</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/js-what_s_new_in_es.html">JS - What s new in ES</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/rxjs-tricks.html">RxJs - Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/vue-router_middleware.html">Vue - Router Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/python-venv.html">Python - Venv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/python-good_practices.html">Python - Good Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../php/php-best-practices.html">PHP - best-practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../php/symfony-begining.html">Symfony - First Step</a></li>
<li class="toctree-l1"><a class="reference internal" href="../php/symfony-test.html">Symfony - test</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sphinx/ccj_init_project.html">Sphinx - My personnal custo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sphinx/travis.html">Sphinx - Travis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uiux/uiux-css_breakpoint.html">UiUx - CSS breakpoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uiux/uiux-design-tricks.html">UiUx - uiux design tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uiux/uiux-less.html">UiUx - LESS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uiux/uiux-skills.html">UIUX - Skills</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conferences/2018-php_tour-montpelier.html">2018 - php tour - montpelier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../draw/draw-apprendre-a-dessiner.html">Apprendre a dessiner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enigma/amazon-software_development_engineer_interview.html">Amazon Software Development Engineer Interview Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enigma/enigma-youtube.html">Enigma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fantasy/fantasy-kabbale_angel.html">Table de rappel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gogame/gogame-reading.html">Gogame - Reading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gogame/gogame-teacher.html">Gogame - Teacher</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gogame/gogame-teacher-ish.html">Gogame - Teacher - ISH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gogame/gogame-teacher-mdz.html">Gogame - Teacher - MDZ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gogame/gogame-variante.html">Gogame - Variantes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gogame/gogame-youtube.html">Go game - Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/duolinguo-chinese.html">Duolingo - Chinese</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/duolinguo-chinese-voc.html">Duolingo - Chinese - Voc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/duolinguo-german.html">Duolingo - German</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/duolinguo-german-voc.html">Duolingo - German - Voc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/duolinguo-italian.html">Duolingo - Italian</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/duolinguo-italian-voc.html">Duolingo - Italian - Voc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/duolingo-japanese.html">Duolingo - Japanese</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/duolingo-japanese-voc.html">Duolingo - Japanese</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/duolinguo-letter.html">Duolinguo - letter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../magic/magic-youtube.html">Magic - Youtube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/math-exercise_code.html">Math - Exercise Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mentalism/fabien_olicard-votre_temps_est_infini.html">Fabien Olicard - Votre temps est infini</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mentalism/fabien_olicard-youtube.html">Fabien Olicard - Youtube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mentalism/influence_hypnotique-youtube.html">Influence Hypnotique - Youtube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mentalism/mentalism-other.html">Mentalism - Other</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methodology/methodology-architecture.html">Methodology - architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methodology/methodology-code-beginner.html">Methodology - Code - Beginner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methodology/methodology-CQRS_event_sourcing_and_DDD.html">Methodology - Event Sourcing and Domain Driven Design (DDD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methodology/methodology-fail_over.html">Methodology - Comment etre sur de rater ton projet informatique</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methodology/methodology-good_practices.html">Methodology - Code - Good Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methodology/methodology-make_a_readme.html">Methodology - What to write in a README</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methodology/methodology-parcours_colaborateur.html">Methodology - Parcours colaborateur</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methodology/methodology-suck_in_programming.html">Methodology - Suck in programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../money/job-the_good_question.html">Job - The Good Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../money/money-libre_et_riche.html">Money - Libre et riche</a></li>
<li class="toctree-l1"><a class="reference internal" href="../money/money-lucbrialy.html">Money - Luc Brialy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../money/money-pierre_olivier.html">Money - Pierre Olivier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../money/money-cafe_de_la_bourse.html">Money - Cafe de la Bourse</a></li>
<li class="toctree-l1"><a class="reference internal" href="../money/money-central_chart-formation_complete_trading.html">Money - Central Chart - formation complete trading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../money/money-new_begin_2021.html">Money - New Begin 2021</a></li>
<li class="toctree-l1"><a class="reference internal" href="../money/money-thiami_kabbay-trading_art.html">Money - Thiami Kabbay - Trading art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../money/money-trading.html">Money - Trading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../music/music-beatbox.html">Music - Beatbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reading/disk_world.html">Reading - Disk World</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipe/recipe-eggs.html">Recipe - Eggs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipe/recipe-pasta.html">Recipe - Pasta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipe/recipe-full_meal.html">Recipe - Full Meal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipe/recipe-vegetables.html">Recipe - Vegetables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quote/quote-main.html">Quote</a></li>
<li class="toctree-l1"><a class="reference internal" href="../60_days_plan.html">Go - 60 days plan</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">my_knowledge</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Git - Hook</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/git/git-hook.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="git-hook">
<h1>Git - Hook<a class="headerlink" href="#git-hook" title="Permalink to this headline">¶</a></h1>
<div class="section" id="def">
<h2>Def<a class="headerlink" href="#def" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Default: <code class="code docutils literal notranslate"><span class="pre">&lt;project&gt;/.git/hooks</span></code></p></li>
<li><p>must be executable <code class="code docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span> <span class="pre">.git/hooks/&lt;hook_file&gt;</span></code></p></li>
<li><p>local hook is not control, just asist</p></li>
<li><p>can blocked action or not (by convention pre-&lt;command&gt; blocked)</p></li>
<li><dl class="simple">
<dt>standart exit</dt><dd><ul>
<li><p>0: ok, don t block</p></li>
<li><p>&gt;= 1: fail, block</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="install-local">
<h2>Install local<a class="headerlink" href="#install-local" title="Permalink to this headline">¶</a></h2>
<div class="section" id="make-post-commit-hook-thanks-to-template">
<h3>Make post-commit hook thanks to template<a class="headerlink" href="#make-post-commit-hook-thanks-to-template" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Not succeed to work :’()</p>
</div>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">init.templatedir</span> <span class="pre">'~/.git-templates'</span></code>: configure git to follow template</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">-p</span> <span class="pre">~/.git-templates/hooks</span> <span class="pre">&amp;&amp;</span> <span class="pre">vi</span> <span class="pre">~/.git-templates/hooks/post-commit</span></code>: prepare files templates</p></li>
<li><p>–&gt; add content of post-commit &lt;–</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">a+x</span> <span class="pre">~/.git-templates/hooks/post-commit</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">git</span> <span class="pre">init</span></code>: re-initialize repos</p></li>
</ul>
</div>
<div class="section" id="make-post-commit-hook-thanks-to-global-directory">
<h3>Make post-commit hook thanks to global directory<a class="headerlink" href="#make-post-commit-hook-thanks-to-global-directory" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">core.hooksPath</span> <span class="pre">'~/.gitconfig/hooks'</span></code>: configure git to follow core hookpath</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">~/.gitconfig/hooks</span> <span class="pre">&amp;&amp;</span> <span class="pre">code:`vi</span> <span class="pre">~/.gitconfig/hooks/pre-commit</span></code>: make needed files</p></li>
<li><p>–&gt; add content of pre-commit &lt;–</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span> <span class="pre">~/.gitconfig/hooks/pre-commit</span></code>:</p></li>
</ul>
</div>
<div class="section" id="make-local-project-hook">
<h3>Make local project hook<a class="headerlink" href="#make-local-project-hook" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If project core.hooksPath is configure in repository, global core.hooksPath will be ignore</p>
</div>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">core.hooksPath</span> <span class="pre">'./hooks'</span></code>: configure git to follow core hookpath, during init project you need to tell everyone to make this command</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">./hooks</span> <span class="pre">&amp;&amp;</span> <span class="pre">vi</span> <span class="pre">./hooks/pre-commit</span></code> : make needed files</p></li>
<li><p>–&gt; add content of pre-commit &lt;–</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span> <span class="pre">./hooks/pre-commit</span></code>: be sure it have good rights</p></li>
</ul>
</div>
</div>
<div class="section" id="install-server">
<h2>Install Server<a class="headerlink" href="#install-server" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Pick a project that needs a custom Git hook.</p></li>
<li><p>On the GitLab server, navigate to the project’s repository directory. For an installation from source the path is usually /home/git/repositories/&lt;group&gt;/&lt;project&gt;.git. For Omnibus installs the path is usually /var/opt/gitlab/git-data/repositories/&lt;group&gt;/&lt;project&gt;.git.</p></li>
<li><p>Create a new directory in this location called custom_hooks.</p></li>
<li><p>Inside the new custom_hooks directory, create a file with a name matching the hook type. For a pre-receive hook the file name should be pre-receive with no extension.</p></li>
<li><p>Make the hook file executable and make sure it’s owned by git.</p></li>
<li><p>Write the code to make the Git hook function as expected. Hooks can be in any language. Ensure the ‘shebang’ at the top properly reflects the language type. For example, if the script is in Ruby the shebang will probably be #!/usr/bin/env ruby.</p></li>
</ol>
</div>
<div class="section" id="hook-list">
<h2>Hook list<a class="headerlink" href="#hook-list" title="Permalink to this headline">¶</a></h2>
<img alt="../_images/git-hooks.png" src="../_images/git-hooks.png" />
<p>commit:</p>
<ul class="simple">
<li><p>pre-commit</p></li>
<li><p>prepare-commit-msg (server)(blocking)</p></li>
<li><p>commit-msg</p></li>
<li><p>post-commit</p></li>
</ul>
<p>patch (git am):</p>
<ul class="simple">
<li><p>applypatch-msg</p></li>
<li><p>pre-applypatch (server)(blocking)</p></li>
<li><p>post-applypatch</p></li>
</ul>
<p>other:</p>
<ul class="simple">
<li><p>post-checkout</p></li>
<li><p>post-merge</p></li>
<li><p>post-rewrite: called by <code class="code docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">--amend,</span> <span class="pre">git</span> <span class="pre">rebase</span></code></p></li>
<li><p>pre-rebase (server)(blocking)</p></li>
<li><p>pre-push (server)(blocking)</p></li>
<li><p>pre-auto-gc (server)(blocking)</p></li>
</ul>
<p>server:</p>
<ul class="simple">
<li><p>pre-receive (server)(blocking)</p></li>
<li><p>update (server)(blocking)</p></li>
<li><p>post-update</p></li>
<li><p>post-receive</p></li>
</ul>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="section" id="post-commit-example">
<h3>Post-commit example<a class="headerlink" href="#post-commit-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="c1"># file: ~/.git-templates/hooks/post-commit</span>
<span class="c1"># desc: just show the commit you made</span>
<span class="c1"># install:</span>
<span class="c1">### configure git to follow template</span>
<span class="c1">## git config --global init.templatedir &#39;~/.git-templates&#39;</span>
<span class="c1">## </span>
<span class="c1">### make needed files</span>
<span class="c1">## mkdir -p ~/.git-templates/hooks</span>
<span class="c1">## vi ~/.git-templates/hooks/post-commit</span>
<span class="c1">## </span>
<span class="c1">### --&gt; add content of post-commit &lt;--</span>
<span class="c1">## </span>
<span class="c1">### be sure it have good rights</span>
<span class="c1">## chmod a+x ~/.git-templates/hooks/post-commit</span>
<span class="c1">## </span>
<span class="c1">### re init your repo</span>
<span class="c1">## git init</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1"># Copy last commit hash to clipboard on commit</span>
<span class="n">echo</span> <span class="s2">&quot;----------------------------------&quot;</span>
<span class="n">echo</span> <span class="s2">&quot;template hook&quot;</span>
<span class="n">echo</span> <span class="s2">&quot;----------------------------------&quot;</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">-</span><span class="mi">1</span> <span class="o">--</span><span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">:</span><span class="o">%</span><span class="n">h</span> <span class="o">|</span> <span class="n">pbcopy</span>

<span class="c1"># Add other post-commit hook</span>
 
</pre></div>
</div>
</div>
<div class="section" id="pre-commit-example">
<h3>Pre-commit example<a class="headerlink" href="#pre-commit-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>
<span class="c1"># file: /home/user/hooks/pre-commit</span>
<span class="c1"># desc: Hook to check if there is !nocommit in the code</span>
<span class="c1"># install:</span>
<span class="c1">### configure git to follow core hookpath</span>
<span class="c1">## git config --global core.hooksPath &#39;~/.gitconfig/hooks&#39;</span>
<span class="c1">## </span>
<span class="c1">### make needed files</span>
<span class="c1">## mkdir ~/.gitconfig/hooks</span>
<span class="c1">## vi ~/.gitconfig/hooks/pre-commit</span>
<span class="c1">##</span>
<span class="c1">## --&gt; add content of pre-commit &lt;--</span>
<span class="c1">##</span>
<span class="c1">### be sure it have good rights</span>
<span class="c1">## chmod +x ~/.gitconfig/hooks/pre-commit</span>
<span class="c1">#</span>
<span class="c1"># To prevent debug code from being accidentally committed, simply add a comment near your</span>
<span class="c1"># debug code containing the keyword !nocommit and this script will abort the commit.</span>
<span class="c1">#</span>
<span class="n">echo</span> <span class="s2">&quot;-------------------------------------------&quot;</span>
<span class="n">echo</span> <span class="s2">&quot;Commit or not commit that is the question&quot;</span>
<span class="n">echo</span> <span class="s2">&quot;-------------------------------------------&quot;</span>
<span class="k">if</span> <span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">v</span> <span class="o">--</span><span class="n">dry</span><span class="o">-</span><span class="n">run</span> <span class="o">|</span> <span class="n">grep</span> <span class="s1">&#39;&lt;remove_this&gt;!nocommit&#39;</span> <span class="o">&gt;/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span> <span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>
<span class="n">then</span>
  <span class="n">echo</span> <span class="s2">&quot;Trying to commit non-committable code.&quot;</span>
  <span class="n">echo</span> <span class="s2">&quot;Remove the !nocommit string and try again.&quot;</span>
  <span class="n">exit</span> <span class="mi">1</span>
<span class="k">else</span>
  <span class="n">exit</span> <span class="mi">0</span>
<span class="n">fi</span>
 
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#! /bin/bash
#
#
# Un script bloquant tout commit tant que
#    des marqueurs de conflits persistent,
#    des chaînes de caractères TODO ou FIXME sont detectée.
#
#
#
# Si vous rencontrez une erreur du type `declare: -A: invalid option`
# c’est qu’il vous faut mettre à jour votre version bash à v4.
# Pour Mac OS, regardez ici : http://clubmate.fi/upgrade-to-bash-4-in-mac-os-x/

# Hash utilisant la clé comme expression de recherche (Regex) et la valeur
# associée comme message d’erreur
declare -A PATTERNS;
PATTERNS[&#39;^[&lt;&gt;|=]{4,}&#39;]=&quot;Vous avez des marqueurs de conflits qui traînent&quot;;
PATTERNS[&#39;TODO|FIXME&#39;]=&quot;Vous avez des tâches non terminées (FIXME/TODO)&quot;;

# Déclare un tableau d’erreurs vide
declare -a errors;

# Boucle sur les noms de fichiers présents dans le `stage`/`index` et
# vérifie que leur contenu contient les chaînes listées dans PATTERNS.
# Filtre uniquement sur les fichiers ajoutés (A), copiés (C), modifiés (M).
for file in $(git diff --staged --name-only --diff-filter=ACM); do
  for elem in ${!PATTERNS[*]} ; do
    { git show :0:&quot;$file&quot; | grep -Eq ${elem}; } || continue;
    errors+=(&quot;${PATTERNS[${elem}]} in ${file}…&quot;);
  done
done

# Affiche les erreurs dans la console.
# Utilise la synthèse vocale si disponible pour énoncer les messages.
author=$(git config --get user.name)
for error in &quot;${errors[@]}&quot;; do
  echo -e &quot;\[\033[1;31m\]${error}\[\033[0m\]&quot;
  # Seulement sur Mac OS : synthèse vocale
  which -s say &amp;&amp; say -v Samantha -r 250 &quot;$author $error&quot;
done

# S’il existe au moins une erreur, arrête la création du commit
if [ ${#errors[@]} -ne 0 ]; then
  exit 1
fi
  
</pre></div>
</div>
</div>
</div>
<div class="section" id="todo">
<h2>Todo<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Todo</p>
<ul class="simple">
<li><dl class="simple">
<dt>to_read:</dt><dd><ul>
<li><p><a class="reference external" href="https://pre-commit.com/">https://pre-commit.com/</a></p></li>
<li><p><a class="reference external" href="https://githooks.com/">https://githooks.com/</a></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>sources:</dt><dd><ul>
<li><p><a class="reference external" href="https://delicious-insights.com/fr/articles/git-hooks/">https://delicious-insights.com/fr/articles/git-hooks/</a></p></li>
<li><p><a class="reference external" href="https://docs.gitlab.com/ee/administration/custom_hooks.html">https://docs.gitlab.com/ee/administration/custom_hooks.html</a></p></li>
<li><p>angularjs: <a class="reference external" href="https://github.com/conventional-changelog-archived-repos/validate-commit-msg">https://github.com/conventional-changelog-archived-repos/validate-commit-msg</a></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="sources">
<h2>Sources<a class="headerlink" href="#sources" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://coderwall.com/p/jp7d5q/create-a-global-git-commit-hook">https://coderwall.com/p/jp7d5q/create-a-global-git-commit-hook</a></p></li>
<li><p><a class="reference external" href="https://delicious-insights.com/fr/articles/git-hooks/">https://delicious-insights.com/fr/articles/git-hooks/</a></p></li>
</ul>
</div>
<div class="section" id="document-history">
<h2>Document history<a class="headerlink" href="#document-history" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Date</p></th>
<th class="head"><p>Version</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2019.08.04</p></td>
<td><p>V1.0</p></td>
<td><p>First write</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="git-submodule.html" class="btn btn-neutral float-right" title="Git - Multi Repo management (submodule and fork)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="git-for_beginner.html" class="btn btn-neutral float-left" title="Git - For beginner" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, ccj

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>